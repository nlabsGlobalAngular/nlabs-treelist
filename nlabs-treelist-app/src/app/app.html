<div class="app-container">
  <header class="app-header">
    <div class="header-content">
      <div class="header-text">
        <h1>{{ title }}</h1>
        <p class="subtitle">Yeni Proje Olu≈ütur</p>
      </div>
      <button class="theme-toggle-btn" (click)="toggleTheme()">
        {{ theme === 'dark' ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode' }}
      </button>
    </div>
  </header>

  <div class="form-container">
    <form (ngSubmit)="onSubmit()" #projeForm="ngForm">
      <!-- Proje Bilgileri -->
      <section class="form-section">
        <h2>Proje Bilgileri</h2>

        <div class="form-group">
          <label for="projeAd">Proje Adƒ± *</label>
          <input
            type="text"
            id="projeAd"
            name="projeAd"
            [(ngModel)]="proje.ad"
            required
            class="form-input"
            placeholder="Proje adƒ±nƒ± giriniz"
          />
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="baslangicTarihi">Ba≈ülangƒ±√ß Tarihi *</label>
            <input
              type="date"
              id="baslangicTarihi"
              name="baslangicTarihi"
              [(ngModel)]="proje.baslangicTarihi"
              required
              class="form-input"
            />
          </div>

          <div class="form-group">
            <label class="checkbox-label">
              <input
                type="checkbox"
                name="devamEdiyorMu"
                [(ngModel)]="proje.devamEdiyorMu"
                class="form-checkbox"
              />
              <span>Proje Devam Ediyor</span>
            </label>
          </div>
        </div>

        <div class="form-group" *ngIf="!proje.devamEdiyorMu">
          <label for="bitisTarihi">Biti≈ü Tarihi *</label>
          <input
            type="date"
            id="bitisTarihi"
            name="bitisTarihi"
            [(ngModel)]="proje.bitisTarihi"
            [required]="!proje.devamEdiyorMu"
            class="form-input"
          />
        </div>
      </section>

      <!-- Organizasyonlar (Yan Yana) -->
      <section class="form-section">
        <h2>Organizasyon Se√ßimi</h2>
        <p class="section-description">Projeden sorumlu ve projede √ßalƒ±≈üacak organizasyonlarƒ± se√ßiniz</p>

        <div class="treelist-grid">
          <!-- Sorumlu Organizasyonlar - Basit G√∂rsel G√∂sterimi -->
          <div class="treelist-column">
            <h3 class="column-title">Sorumlu Organizasyonlar (Basit)</h3>
            <p class="column-description">Default g√∂sterim - showImage=true ile g√∂rseller otomatik g√∂sterilir</p>
            <div class="treelist-wrapper">
              <!-- showImage=true: G√∂rseller otomatik g√∂sterilir -->
              <nlabs-tree-list
                [nodes]="sorumluOrganizasyonNodes"
                [theme]="theme"
                [showThemeSwitcher]="false"
                [showImage]="true"
                [expandOnSelect]="true"
                [selectChildren]="true"
                [nameClickAction]="'toggle'"
                (selectedIdsChange)="onSorumluOrganizasyonChange($event)"
              ></nlabs-tree-list>
            </div>
            <div class="selected-count">
              Se√ßili: {{ proje.sorumluOrganizasyonIds.length }} organizasyon
            </div>
          </div>

          <!-- √áalƒ±≈üan Organizasyonlar - CRUD ƒ∞≈ülemleri -->
          <div class="treelist-column">
            <h3 class="column-title">√áalƒ±≈üan Organizasyonlar (CRUD)</h3>
            <p class="column-description">showActions=true ile Ekle/D√ºzenle/Sil i≈ülemleri</p>
            <div class="treelist-wrapper">
              <!-- showActions=true: CRUD butonlarƒ± g√∂sterilir -->
              <nlabs-tree-list
                [nodes]="calisanOrganizasyonNodes"
                [theme]="theme"
                [showThemeSwitcher]="false"
                [showImage]="true"
                [showActions]="true"
                [expandOnSelect]="false"
                [selectChildren]="false"
                [nameClickAction]="'toggle'"
                [loadChildrenFn]="loadAltOrganizasyonlar"
                (selectedIdsChange)="onCalisanOrganizasyonChange($event)"
                (nodeAdd)="onNodeAdd($event)"
                (nodeEdit)="onNodeEdit($event)"
                (nodeDelete)="onNodeDelete($event)"
              ></nlabs-tree-list>
            </div>
            <div class="selected-count">
              Se√ßili: {{ proje.calisanOrganizasyonIds.length }} organizasyon
            </div>
          </div>
        </div>
      </section>

      <!-- Form Actions -->
      <div class="form-actions">
        <button type="button" class="btn btn-secondary">ƒ∞ptal</button>
        <button type="submit" class="btn btn-primary" [disabled]="!projeForm.valid">
          Projeyi Kaydet
        </button>
      </div>
    </form>
  </div>
</div>
